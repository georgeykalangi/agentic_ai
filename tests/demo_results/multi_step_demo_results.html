<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Multi-Step Reflection Demo: Agentic AI Design Patterns</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            color: white;
            padding: 40px 20px;
            text-align: center;
            border-radius: 10px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            font-weight: 300;
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .progress-summary {
            background: white;
            padding: 25px;
            border-radius: 10px;
            margin-bottom: 30px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            border-left: 5px solid #3498db;
        }

        .progress-summary h2 {
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 1.8em;
        }

        .progress-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .progress-item {
            text-align: center;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 8px;
            border: 1px solid #e9ecef;
        }

        .progress-item h3 {
            color: #495057;
            margin-bottom: 10px;
            font-size: 1.1em;
        }

        .progress-item .number {
            font-size: 2em;
            font-weight: bold;
            color: #3498db;
        }

        .progress-item .label {
            color: #6c757d;
            font-size: 0.9em;
            margin-top: 5px;
        }

        .step-section {
            background: white;
            margin-bottom: 25px;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            border: 1px solid #e9ecef;
        }

        .step-header {
            background: linear-gradient(135deg, #3498db 0%, #2980b9 100%);
            color: white;
            padding: 20px;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: background 0.3s ease;
        }

        .step-header:hover {
            background: linear-gradient(135deg, #2980b9 0%, #1f5f8b 100%);
        }

        .step-header h3 {
            font-size: 1.4em;
            font-weight: 500;
        }

        .step-toggle {
            background: rgba(255,255,255,0.2);
            border: none;
            color: white;
            padding: 8px 12px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1.2em;
            transition: all 0.3s ease;
        }

        .step-toggle:hover {
            background: rgba(255,255,255,0.3);
            transform: scale(1.05);
        }

        .step-content {
            padding: 0;
            max-height: 0;
            overflow: hidden;
            transition: all 0.5s ease;
            background: #f8f9fa;
        }

        .step-content.active {
            padding: 25px;
            max-height: 2000px;
        }

        .step-content h4 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 1.3em;
            border-bottom: 2px solid #3498db;
            padding-bottom: 8px;
        }

        .step-content p {
            margin-bottom: 15px;
            text-align: justify;
        }

        .step-content ul, .step-content ol {
            margin-left: 20px;
            margin-bottom: 15px;
        }

        .step-content li {
            margin-bottom: 8px;
        }

        .step-content strong {
            color: #2c3e50;
        }

        .comparison-section {
            background: white;
            padding: 25px;
            border-radius: 10px;
            margin-bottom: 30px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            border-left: 5px solid #e74c3c;
        }

        .comparison-section h2 {
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 1.8em;
        }

        .footer {
            text-align: center;
            padding: 30px;
            color: #6c757d;
            background: white;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .footer a {
            color: #3498db;
            text-decoration: none;
        }

        .footer a:hover {
            text-decoration: underline;
        }

        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            .header h1 {
                font-size: 2em;
            }
            
            .progress-grid {
                grid-template-columns: 1fr;
            }
        }

        .highlight-box {
            background: #e8f4fd;
            border: 1px solid #bee5eb;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }

        .highlight-box h4 {
            color: #0c5460;
            margin-bottom: 10px;
        }

        .code-block {
            background: #2d3748;
            color: #e2e8f0;
            padding: 20px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            overflow-x: auto;
            margin: 15px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header Section -->
        <div class="header">
            <h1>🚀 Multi-Step Reflection Demo</h1>
            <p>Agentic AI Design Patterns - Original vs Enhanced Results Comparison</p>
        </div>

        <!-- Progress Summary -->
        <div class="progress-summary">
            <h2>📊 Reflection Progress Summary</h2>
            
            <h3>🔄 Original Demo Results</h3>
            <div class="progress-grid">
                <div class="progress-item">
                    <div class="number">117</div>
                    <div class="label">Original Prompt (chars)</div>
                </div>
                <div class="progress-item">
                    <div class="number">19,769</div>
                    <div class="label">Initial Response (chars)</div>
                </div>
                <div class="progress-item">
                    <div class="number">7,431</div>
                    <div class="label">After Step 1 (chars)</div>
                </div>
                <div class="progress-item">
                    <div class="number">12,669</div>
                    <div class="label">After Step 2 (chars)</div>
                </div>
                <div class="progress-item">
                    <div class="number">4,014</div>
                    <div class="label">Final Response (chars)</div>
                </div>
            </div>
            
            <h3 style="margin-top: 30px; color: #27ae60;">🚀 Enhanced Demo Results</h3>
            <div class="progress-grid">
                <div class="progress-item">
                    <div class="number">117</div>
                    <div class="label">Original Prompt (chars)</div>
                </div>
                <div class="progress-item">
                    <div class="number">12,074</div>
                    <div class="label">After Step 1 (chars)</div>
                </div>
                <div class="progress-item">
                    <div class="number">16,923</div>
                    <div class="label">After Step 2 (chars)</div>
                </div>
                <div class="progress-item">
                    <div class="number">26,573</div>
                    <div class="label">Final Response (chars)</div>
                </div>
                <div class="progress-item" style="background: #d5f4e6; border-color: #27ae60;">
                    <div class="number" style="color: #27ae60;">✅</div>
                    <div class="label">Context Maintained</div>
                </div>
            </div>
        </div>

        <!-- Step 1: Initial Response -->
        <div class="step-section">
            <div class="step-header" onclick="toggleStep('step1')">
                <h3>🔄 Step 1: Initial Response Generation</h3>
                <button class="step-toggle" id="step1-toggle">+</button>
            </div>
            <div class="step-content" id="step1-content">
                <h4>Initial Response (19,769 characters)</h4>
                <div class="highlight-box">
                    <h4>Key Characteristics:</h4>
                    <ul>
                        <li><strong>Comprehensive Coverage:</strong> Detailed explanation of all major design patterns</li>
                        <li><strong>Technical Depth:</strong> In-depth technical explanations with examples</li>
                        <li><strong>Length:</strong> Very detailed but potentially overwhelming</li>
                    </ul>
                </div>
                <p><strong>Design Patterns for Agentic AI: Building Intelligent and Autonomous Systems</strong></p>
                <p>Agentic AI, or AI agents, are autonomous entities capable of perceiving their environment, making decisions, and taking actions to achieve specific goals. Developing effective agentic AI systems requires careful design considerations, and design patterns offer a proven approach for structuring and managing the complexity involved.</p>
                <p>Here's a breakdown of key design patterns applicable to agentic AI, along with practical examples and implementation considerations:</p>
                <p><strong>I. Core Agentic Patterns:</strong> These patterns define the fundamental structure and behavior of the agent.</p>
                <p><strong>1. Perceive-Reason-Act (PRA) / Observe-Orient-Decide-Act (OODA) Loop:</strong></p>
                <ul>
                    <li><strong>Description:</strong> The foundational pattern for agent behavior. It mimics the human cognitive process of understanding the environment, reasoning about the situation, deciding on a course of action, and then executing that action.</li>
                    <li><strong>Components:</strong> Perceive/Observe, Reason/Orient, Act/Decide, Act</li>
                    <li><strong>Practical Example:</strong> Self-driving car with cameras, LiDAR, radar for perception and decision-making</li>
                </ul>
            </div>
        </div>

        <!-- Step 2: First Improvement -->
        <div class="step-section">
            <div class="step-header" onclick="toggleStep('step2')">
                <h3>🔄 Step 2: First Reflection Cycle</h3>
                <button class="step-toggle" id="step2-toggle">+</button>
            </div>
            <div class="step-content" id="step2-content">
                <h4>Step 1 Improved Response (7,431 characters)</h4>
                <div class="highlight-box">
                    <h4>Key Improvements:</h4>
                    <ul>
                        <li><strong>Condensation:</strong> Reduced from 19,769 to 7,431 characters</li>
                        <li><strong>Focus:</strong> More targeted and concise explanations</li>
                        <li><strong>Clarity:</strong> Removed redundant information</li>
                    </ul>
                </div>
                <p>The AI recognized that the initial response was too verbose and condensed it significantly while maintaining the core technical content. This demonstrates the agent's ability to self-assess and improve its output.</p>
            </div>
        </div>

        <!-- Step 3: Second Improvement -->
        <div class="step-section">
            <div class="step-header" onclick="toggleStep('step3')">
                <h3>🔄 Step 3: Second Reflection Cycle</h3>
                <button class="step-toggle" id="step3-toggle">+</button>
            </div>
            <div class="step-content" id="step3-content">
                <h4>Step 2 Improved Response (12,669 characters)</h4>
                <div class="highlight-box">
                    <h4>Key Improvements:</h4>
                    <ul>
                        <li><strong>Expansion:</strong> Increased from 7,431 to 12,669 characters</li>
                        <li><strong>Enhanced Structure:</strong> Better organization and flow</li>
                        <li><strong>Additional Examples:</strong> More practical implementation details</li>
                    </ul>
                </div>
                <p>The AI expanded on the condensed version with better structure, clearer examples, and more practical implementation guidance. This shows the agent's ability to balance conciseness with comprehensiveness.</p>
            </div>
        </div>

        <!-- Step 4: Final Refinement -->
        <div class="step-section">
            <div class="step-header" onclick="toggleStep('step4')">
                <h3>🔄 Step 4: Final Reflection Cycle</h3>
                <button class="step-toggle" id="step4-toggle">+</button>
            </div>
            <div class="step-content" id="step4-content">
                <h4>Final Response (4,014 characters)</h4>
                <div class="highlight-box">
                    <h4>⚠️ Important Observation:</h4>
                    <p><strong>The reflection process went off-track in the final step!</strong> Instead of improving the content about Agentic AI Design Patterns, the AI started analyzing feedback about improving a document. This demonstrates an important aspect of reflection patterns - they need proper guidance to stay on topic.</p>
                </div>
                <div class="highlight-box">
                    <h4>What Actually Happened:</h4>
                    <ul>
                        <li><strong>Step 1:</strong> Generated comprehensive content about Agentic AI patterns</li>
                        <li><strong>Step 2:</strong> Condensed and focused the content</li>
                        <li><strong>Step 3:</strong> Expanded with better structure</li>
                        <li><strong>Step 4:</strong> <strong>Went off-track</strong> - started analyzing feedback instead of improving content</li>
                    </ul>
                </div>
                <h4>Final Response Content (Feedback Analysis):</h4>
                <p><strong>This revised response is excellent!</strong> It demonstrates a deep understanding of the feedback and a concrete plan for incorporating it. Here's a breakdown of why it's so good and some minor suggestions:</p>
                
                <h5>Strengths:</h5>
                <ul>
                    <li><strong>Enthusiastic and appreciative tone:</strong> The opening conveys genuine gratitude and excitement about the feedback.</li>
                    <li><strong>Clear summary of key improvements:</strong> It immediately highlights the most impactful changes you'll be making.</li>
                    <li><strong>Structured breakdown:</strong> The division into "General Improvements," "Specific Pattern Improvements," and "Implementation Considerations" is extremely helpful.</li>
                    <li><strong>Specific actions:</strong> Each bullet point describes precisely what you'll do to address the feedback.</li>
                </ul>
                
                <h5>Why This Happened:</h5>
                <p>This demonstrates a key challenge in reflection patterns - without proper guidance, the AI can interpret the reflection prompt differently than intended. In this case, it started analyzing feedback about improving a document rather than continuing to improve the Agentic AI content.</p>
            </div>
        </div>

        <!-- Comparison Analysis -->
        <div class="comparison-section">
            <h2>📈 AI-Generated Comparison Analysis</h2>
            <div class="highlight-box">
                <h4>Key Findings:</h4>
                <ul>
                    <li><strong>Progressive Improvement:</strong> Steps 1-3 showed meaningful enhancement</li>
                    <li><strong>Self-Awareness:</strong> AI recognized and addressed its own limitations</li>
                    <li><strong>Quality Enhancement:</strong> Steps 1-3 produced more focused and practical content</li>
                    <li><strong>Reflection Challenge:</strong> Step 4 went off-track, demonstrating the need for better guidance</li>
                </ul>
            </div>
            <p>The comparison analysis reveals that the AI successfully improved the content through the first three reflection cycles, but the final step went off-track. This demonstrates both the power and the challenges of reflection patterns in AI systems - they need proper guidance to maintain focus on the intended task.</p>
        </div>

        <!-- Enhanced Demo Results Section -->
        <div class="step-section">
            <div class="step-header" onclick="toggleStep('enhanced')">
                <h3>🚀 Enhanced Multi-Step Reflection Results</h3>
                <button class="step-toggle" id="enhanced-toggle">+</button>
            </div>
            <div class="step-content" id="enhanced-content">
                <h4>Successfully Implemented Improvements</h4>
                <div class="highlight-box">
                    <h4>✅ Enhanced Features Implemented:</h4>
                    <ul>
                        <li><strong>Better Prompt Engineering:</strong> Context maintenance throughout all steps</li>
                        <li><strong>Validation Checks:</strong> Real-time scoring for context and content quality</li>
                        <li><strong>Context Maintenance:</strong> Stayed on topic about Agentic AI Design Patterns</li>
                        <li><strong>Iteration Limits:</strong> Completed 3 steps without drift</li>
                        <li><strong>Automatic Recovery:</strong> Built-in mechanisms to prevent off-topic responses</li>
                    </ul>
                </div>
                
                <h4>Enhanced Demo Results</h4>
                <div class="highlight-box">
                    <h4>📊 Progressive Improvement Summary:</h4>
                    <ul>
                        <li><strong>Original Prompt:</strong> 117 characters</li>
                        <li><strong>Step 1:</strong> 117 → 12,074 characters (Context Score: 0.75, Content Score: 1.00)</li>
                        <li><strong>Step 2:</strong> 12,074 → 16,923 characters (Context Score: 0.75, Content Score: 1.00)</li>
                        <li><strong>Step 3:</strong> 16,923 → 26,573 characters (Context Score: 0.90, Content Score: 1.00)</li>
                        <li><strong>Final Response:</strong> 26,573 characters of high-quality content</li>
                    </ul>
                </div>
                
                <h4>🎯 Final Enhanced Content Topics</h4>
                <p>The enhanced reflection successfully produced comprehensive content covering:</p>
                <ol>
                    <li><strong>Observer Pattern</strong> - With practical examples and Python code</li>
                    <li><strong>Goal-Oriented Action Planning (GOAP)</strong> - With implementation considerations</li>
                    <li><strong>Utility-Based Decision Making</strong> - With Python examples</li>
                    <li><strong>Finite State Machine (FSM)</strong> - With complete code implementation</li>
                    <li><strong>Behavior Tree Pattern</strong> - With hierarchical behavior examples</li>
                </ol>
                
                <div class="highlight-box">
                    <h4>🔧 Technical Improvements Demonstrated:</h4>
                    <ul>
                        <li><strong>No Drift:</strong> Stayed focused on Agentic AI patterns throughout</li>
                        <li><strong>Progressive Enhancement:</strong> Each step built meaningfully on the previous</li>
                        <li><strong>Quality Validation:</strong> All steps passed content quality checks</li>
                        <li><strong>Context Maintenance:</strong> Maintained relevance to the original topic</li>
                        <li><strong>Practical Examples:</strong> Included real code and implementation details</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Lessons Learned Section -->
        <div class="step-section">
            <div class="step-header" onclick="toggleStep('lessons')">
                <h3>🎓 Lessons Learned from Both Demos</h3>
                <button class="step-toggle" id="lessons-toggle">+</button>
            </div>
            <div class="step-content" id="lessons-content">
                <h4>Key Insights About Reflection Patterns</h4>
                
                <div class="highlight-box">
                    <h4>📚 Original Demo - What We Learned:</h4>
                    <ul>
                        <li><strong>Initial Reflection:</strong> AI successfully condensed verbose content</li>
                        <li><strong>Progressive Improvement:</strong> Each step built upon the previous</li>
                        <li><strong>Self-Assessment:</strong> AI demonstrated ability to critique its own work</li>
                        <li><strong>Challenge Identified:</strong> Final reflection went off-topic</li>
                    </ul>
                </div>
                
                <div class="highlight-box">
                    <h4>🚀 Enhanced Demo - How We Solved It:</h4>
                    <ul>
                        <li><strong>Better Prompts:</strong> Specific instructions with context maintenance</li>
                        <li><strong>Validation System:</strong> Real-time scoring and quality checks</li>
                        <li><strong>Recovery Mechanisms:</strong> Automatic correction of off-topic responses</li>
                        <li><strong>Success Metrics:</strong> All steps maintained context and quality</li>
                    </ul>
                </div>
                
                <div class="highlight-box">
                    <h4>💡 Key Takeaways:</h4>
                    <ul>
                        <li><strong>Reflection Patterns Work:</strong> AI can significantly improve its own output</li>
                        <li><strong>Guidance is Critical:</strong> Proper prompts prevent drift and maintain focus</li>
                        <li><strong>Validation is Essential:</strong> Real-time checks ensure quality and relevance</li>
                        <li><strong>Iterative Improvement:</strong> Multiple reflection cycles produce better results</li>
                        <li><strong>Context Maintenance:</strong> Keeping AI on-topic requires careful design</li>
                    </ul>
                </div>
                
                <p><strong>Both demos together provide a complete picture of reflection pattern implementation!</strong> The original demo showed the challenges, and the enhanced demo demonstrated the solutions.</p>
            </div>
        </div>

        <!-- Footer -->
        <div class="footer">
            <p>Generated by <strong>Reflective Agent Demo</strong> - Multi-Step Reflection on Agentic AI Design Patterns</p>
            <p>View the complete <a href="../README.md">project documentation</a> or <a href="../../reflective_agent.md">detailed code explanation</a></p>
            <p><em>This demonstration showcases the progressive improvement capabilities of AI systems using reflection patterns.</em></p>
        </div>
    </div>

    <script>
        function toggleStep(stepId) {
            const content = document.getElementById(stepId + '-content');
            const toggle = document.getElementById(stepId + '-toggle');
            
            if (content.classList.contains('active')) {
                content.classList.remove('active');
                toggle.textContent = '+';
            } else {
                content.classList.add('active');
                toggle.textContent = '−';
            }
        }

        // Auto-expand the first step for better initial experience
        document.addEventListener('DOMContentLoaded', function() {
            toggleStep('step1');
        });
    </script>
</body>
</html>
